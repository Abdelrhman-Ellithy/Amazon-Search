package Pages;

import Ellithium.Utilities.DriverActions;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;

import java.util.ArrayList;
import java.util.List;

public class SearchPage {
    private WebDriver driver;
    private final String baseUrl="https://www.amazon.eg/-/en/";
    private final By searchField=By.id("twotabsearchtextbox");
    private final By itemTitle=By.cssSelector("span[class='a-size-base-plus a-color-base a-text-normal']");
    private final By itemPrice=By.className("a-price-whole");
    private final By searchBtn=By.id("nav-search-submit-button");
    public SearchPage(WebDriver driver){
        this.driver=driver;
        DriverActions.navigateToUrl(driver,baseUrl);
    }
    public void searchForItem(String item){
        DriverActions.sendData(driver, searchField, item, 4,300);
    }
    public void clickSearchButton(){
        DriverActions.clickOnElement(driver, searchBtn, 3,200);
    }
    public List<String> getResultsNames(){
        return DriverActions.getTextFromMultipleElements(driver,itemTitle,5,200 );
    }
    public List<String> getResultsPrices(){
        List<String>itemResultsAsString= DriverActions.getTextFromMultipleElements(driver,itemPrice,5,200 );
        return itemResultsAsString;
    }
}



package Base;

import Ellithium.DriverSetup.DriverFactory;
import org.openqa.selenium.WebDriver;

public class BaseStepDefinitions {
    protected WebDriver driver;
    public BaseStepDefinitions(){
        this.driver= DriverFactory.getNewDriver();
    }
}





package Runner;

import Ellithium.DriverSetup.SETUP;
import io.cucumber.testng.CucumberOptions;

@CucumberOptions(
        glue = "stepDefinitions", // path to your stepDefinitions package, note you should use . instead of /
        features="src/test/resources/features" // path to your features folder
)
public class TestRunner extends SETUP {
}









package stepDefinitions;

import Base.BaseStepDefinitions;
import Ellithium.Utilities.ExcelHelper;
import Pages.SearchPage;
import io.cucumber.java.en.And;
import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;
import io.cucumber.java.en.When;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class SearchStepDefinition extends BaseStepDefinitions {

    SearchPage searchPage;

    @Given("the user in the search page")
    public void the_user_in_the_search_page() {
        searchPage=new SearchPage(driver);
    }
    @And("the user types Monitor in the search bar")
    public void the_user_types_monitor_in_the_search_bar() {
            searchPage.searchForItem("Monitor");
    }
    @When("the user clicks the search button")
    public void the_user_clicks_the_search_button() {
        searchPage.clickSearchButton();
    }
    @Then("relevant items is returned")
    public void relevant_items_is_returned() {
        List<String>itemNames=searchPage.getResultsNames();
        List<String>itemPrices=searchPage.getResultsPrices();
        List<Map<String, String>> data=new ArrayList<>();

        for(int i=0; i<5; i++ ) {
            Map<String, String> h = new HashMap<String, String>();
            h.put(itemNames.get(i), itemPrices.get(i));
            data.add(h);

        }
        System.out.println(data);
        ExcelHelper.setExcelData("src/test/resources/TestData/Scope Assessment1","ItemsAndPrices", data);
    }
}




Feature: Search
  Scenario: The user searches for Items and save their names and prices
    Given the user in the search page
      And the user types Monitor in the search bar
    When the user clicks the search button
    Then relevant items is returned



#Mon Sep 09 13:46:17 EEST 2024
allure.open.afterExecution=true
allure.results.directory=Test-Output/Reports/Allure/allure-results
allure.report.directory=Test-Output/Reports/Allure/allure-report


#Mon Sep 09 13:46:17 EEST 2024
EllithiumVersion=1.0.2
allureVersion=2.30.0
closeDriverAfterScenario=true
loggerExtensiveTraceMode=true
defaultDriverWaitTimeout=10
defaultElementWaitTimeout=5
defaultElementPollingTime=200

